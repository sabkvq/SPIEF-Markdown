

## Описание

HashiCorp Vault — это инструмент с открытым исходным кодом для безопасного хранения и управления секретами (паролями, токенами, сертификатами и другими конфиденциальными данными). Vault обеспечивает централизованный контроль доступа к секретам, их шифрование и аудит использования, позволяя приложениям и пользователям безопасно получать необходимые данные без риска утечки.

Vault работает как HTTP-сервер, который обрабатывает запросы на хранение и выдачу секретов, взаимодействуя с различными типами хранилищ (файловая система, базы данных, облачные сервисы). Данные в Vault всегда хранятся в зашифрованном виде, а доступ к ним регулируется через токены с гибкими политиками прав.

## Инструменты

- CLI (командная строка) для управления Vault.
- REST API для интеграции с приложениями.
- Механизмы аутентификации (токены, LDAP, Kubernetes, облачные провайдеры).
- Поддержка различных типов секретов: key-value, динамические креденшелы (базы данных, облака), PKI-сертификаты.
- Auto Unseal — автоматическое расшифрование хранилища с помощью внешних KMS (например, Yandex KMS).
- Механизмы аудита и логирования доступа.
- SDK и плагины для расширения функционала.

## Связь с другими навыками

| Технология           | Взаимодействие                                          |
| -------------------- | ------------------------------------------------------ |
| Kubernetes           | Интеграция для безопасного управления секретами в кластере |
| Облачные KMS         | Использование для Auto Unseal и дополнительного шифрования |
| CI/CD                | Автоматизация выдачи и ротации секретов в пайплайнах   |
| LDAP, OAuth          | Аутентификация пользователей и сервисов                |
| Приложения и сервисы | Получение секретов через API или SDK                    |
| Безопасность         | Централизованный контроль доступа и аудит               |

## Архитектура и основные понятия

- **HTTP-сервер** — Vault принимает запросы на хранение и получение секретов.
- **Storage backend** — физическое хранилище зашифрованных данных (файлы, базы, облако).
- **Движки секретов (Secret Engines)** — модули для работы с разными типами секретов (например, KV для key-value, database для динамических учетных данных).
- **Аутентификация** — различные методы для проверки прав доступа.
- **Политики доступа** — определяют, кто и что может делать с секретами.
- **Radix-роутер** — внутренний механизм маршрутизации запросов к нужным движкам и методам.
- **Модель "матрешка" хранения** — слои, обеспечивающие шифрование, кеширование и префиксы для изоляции данных движков.
- **Auto Unseal** — возможность автоматического расшифрования хранилища с помощью внешних сервисов KMS.

## Практика

### Оценка уровня навыка

| Уровень | Описание                                | Ключевые навыки                          | Критерии оценки                                    |
| ------- | ------------------------------------- | --------------------------------------- | ------------------------------------------------- |
| Junior  | Знаком с основами Vault и хранением секретов | Запуск сервера, создание и чтение секретов | Может хранить и получать простые секреты          |
| Middle  | Настраивает аутентификацию и политики | Управление доступом, интеграция с LDAP/Kubernetes | Настраивает безопасный доступ и ротацию секретов  |
| Senior  | Автоматизирует управление секретами   | Использование динамических секретов, Auto Unseal | Встраивает Vault в CI/CD и инфраструктуру          |
| Expert  | Разрабатывает расширения и кастомные движки | Глубокое понимание архитектуры и безопасности | Создаёт сложные решения и оптимизирует производительность |

### Бизнес-ценность и использование в работе

| Применение           | Описание                                         | Преимущества                                  | Рекомендации по использованию                   |
| -------------------- | ------------------------------------------------ | --------------------------------------------- | ----------------------------------------------- |
| Централизованное хранение | Безопасное хранение паролей, ключей, сертификатов | Снижение риска утечек, упрощение управления   | Использовать для всех типов секретов             |
| Управление доступом  | Гранулярные политики и аутентификация             | Контроль и аудит доступа к критичным данным   | Настраивать роли и политики доступа              |
| Автоматизация        | Динамическая выдача временных секретов            | Повышение безопасности и удобства эксплуатации | Интегрировать с CI/CD и Kubernetes               |
| Шифрование данных    | Защита данных на уровне хранения                   | Соответствие требованиям безопасности         | Использовать внешние KMS для Auto Unseal         |

### Pet-project

| Уровень    | Название проекта         | Описание                                    | Технологии           | Критерий успеха                      | Вспомогательные ссылки               |
| ---------- | ----------------------- | ------------------------------------------- | -------------------- | ---------------------------------- | ---------------------------------- |
| Junior     | Хранение секретов       | Запуск Vault и хранение простых ключей      | Vault, CLI           | Успешное хранение и получение секретов | Habr, официальная документация     |
| Middle     | Интеграция с Kubernetes | Настройка аутентификации и политик доступа  | Vault, Kubernetes    | Безопасный доступ из подов          | Yandex Cloud Docs, HashiCorp Vault |
| Senior     | Автоматизация секретов  | Использование динамических секретов и Auto Unseal | Vault, KMS, CI/CD    | Автоматическая ротация секретов    | HashiCorp Tutorials                |
| Expert     | Кастомные движки Vault  | Разработка собственного движка секретов     | Go, Vault SDK        | Расширение функционала Vault        | GitHub, HashiCorp Developer Guides |

## Траблшутинг

- Проверка логов Vault-сервера и агента.
- Диагностика проблем с аутентификацией и политиками доступа.
- Отладка конфигураций storage backend и Auto Unseal.
- Анализ ошибок при создании и чтении секретов.
- Управление токенами и их сроком жизни.

## Ресурсы, форумы

- Habr — статьи и кейсы по HashiCorp Vault  
- Официальная документация HashiCorp Vault  
- Yandex Cloud — руководство по интеграции Vault в Kubernetes  
- HashiCorp Learn — обучающие курсы и туториалы  
- Stack Overflow — вопросы и ответы по Vault  
- Сообщества DevOps и безопасности  

---
